local wezterm = require 'wezterm'

local config = wezterm.config_builder()

-- Font
config.font = wezterm.font_with_fallback {
    { family = 'JetBrainsMono Nerd Font', weight = 'Medium' },
    'Symbols Nerd Font Mono',
}
config.font_size = 12.0
config.line_height = 1.2

-- Color scheme
config.color_scheme = 'Gruvbox dark, hard (base16)'

-- Window appearance
config.window_background_opacity = 0.92
{{- if eq .chezmoi.os "darwin" }}
config.macos_window_background_blur = 20
config.window_decorations = 'RESIZE'
{{- else }}
config.window_decorations = 'NONE'
{{- end }}
config.window_padding = {
    left = 25,
    right = 25,
    top = 20,
    bottom = 20,
}

-- Disable tab bar for clean look
config.enable_tab_bar = false
config.hide_tab_bar_if_only_one_tab = true

-- Cursor
config.default_cursor_style = 'BlinkingBar'
config.cursor_blink_rate = 500
config.cursor_blink_ease_in = 'Constant'
config.cursor_blink_ease_out = 'Constant'

-- Scrollbar
config.enable_scroll_bar = false

-- Bell
config.audible_bell = 'Disabled'
config.visual_bell = {
    fade_in_duration_ms = 75,
    fade_out_duration_ms = 75,
    target = 'CursorColor',
}

{{- if eq .chezmoi.os "darwin" }}
-- macOS: Use Metal for best performance
config.front_end = 'WebGpu'
config.webgpu_power_preference = 'HighPerformance'
{{- else }}
-- Linux: OpenGL is more stable on Wayland/Hyprland
config.front_end = 'OpenGL'
config.enable_wayland = true
{{- end }}

-- Misc
config.adjust_window_size_when_changing_font_size = false
config.warn_about_missing_glyphs = false

-- Set TERM for proper tmux compatibility
config.term = 'wezterm'

return config

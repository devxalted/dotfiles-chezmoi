#!/bin/bash
# OSC 52 clipboard copy - works with mosh + tmux
# Sends clipboard data directly to the outer terminal

buf=$(cat "$@")
encoded=$(echo -n "$buf" | base64 | tr -d '\n')

# Only works inside tmux (mosh + tmux remote clipboard)
[ -z "$TMUX" ] && exit 0

tty=$(tmux display-message -p '#{client_tty}')
printf '\ePtmux;\e\e]52;c;%s\a\e\\' "$encoded" > "$tty"
